# 中文分词和词性标注大作业 程序使用说明

## 功能

- 单句和段落的中文分词，经扩展后或可支持其他语言
- 指定、合并、自定义词典
- 词性标注，包括人名（姓、名）、地名、机构名等

## 算法

- 参照本地词典扫描句子，构建出一个词图，采用动态规划算法求出最大概率路径，完成初步的分词
- 采用隐马尔可夫模型和维特比算法，对未登录的汉字进行二次分词
- 采用隐马尔可夫模型和维特比算法，对完成分词的句子中的词进行词性标注
- 在词性标注过程中，对于词性词典中未登录的词，求其中每个汉字作为某种词性出现的概率的平均值，获得该词的词性概率

## 使用接口

-   分词和词性标注：```seg_mark.cut```函数，传入的参数有

    - ```sentence``` 需要分词和标注词性的句子
    - ```HMM=True``` 是否采用HMM模型对未登陆词进行二次分词
    - ```out=True``` 是否输出分词结果

-   传入更新词典：```dic.merge_dic```函数，传入的参数有

    - ```path1``` 原词典的路径
    - ```path2``` 已经完成分词的文章的路径
    - ```path='data/dict.txt'``` 输出词典的路径 

## 词性标注符号说明

本作业采用[corpusZH](https://github.com/liwenzhu/corpusZh)提供的语料库实现词性标注算法，采用的符号也沿用该语料库

		n   普通名词
		nt  时间名词
		nd  方位名词
		nl  处所名词
		nh  人名
		nhf 姓
		nhs 名
		ns  地名
		nn  族名
		ni  机构名
		nz  其他专名
		v   动词
		vd  趋向动词
		vl  联系动词
		vu  能愿动词
		a   形容词
		f   区别词
		m   数词　　
		q   量词
		d   副词
		r   代词
		p   介词
		c   连词
		u   助词
		e   叹词
		o   拟声词
		i   习用语
		j   缩略语
		h   前接成分
		k   后接成分
		g   语素字
		x   非语素字
		w   标点符号
		ws  非汉字字符串
		wu  其他未知的符号

## 代码示例

```python
>>> from seg_mark import cut

# 分句分词
>>> cut('谁是我们的敌人')
['谁', '是', '我们', '的', '敌人']
['r', 'vl', 'r', 'u', 'n']

# 整句分词
>>> cut('谁是我们的敌人，谁是我们的朋友，这个问题是革命的首要问题')
['谁', '是', '我们', '的', '敌人']
['r', 'vl', 'r', 'u', 'n']
['谁', '是', '我们', '的', '朋友']
['r', 'vl', 'r', 'u', 'n']
['这个', '问题', '是', '革命', '的', '首要', '问题']
['r', 'n', 'vl', 'v', 'u', 'a', 'n']

# HMM比较
>>> cut('阅尽人间春色')
['阅尽', '人间', '春色']
['u', 'n', 'n']
>>> cut('阅尽人间春色', HMM=False)
['阅', '尽', '人间', '春色']
['v', 'v', 'n', 'n']

# 人名、地名和机构名
>>> cut('江泽民同志毕业于上海交通大学')
['江泽民', '同志', '毕业', '于', '上海交通大学']
['nh', 'n', 'v', 'v', 'ni']
>>> cut('北京是中国的首都')
['北京', '是', '中国', '的', '首都']
['ns', 'vl', 'ns', 'u', 'n']
```

## 结果评价

-   评价数据

	分词和词性标注的测试集采用与训练集同源（见上文）的未使用的语料库

-   评价方法

	我们从正确率、召回率、F1值和效率四个维度对分词和词性标注功能进行评价

	- 分词：将句子中的所有字按分词标记为B、M、E、S，分别代表词头、词中、词尾、单独成词，再进行计算

	- 词性标注：按照词性直接进行计算

-   评价结果

	- 分词

        |符号|准确率|召回率|F1|
        |----|----|---|---|
        |B|0.817292|0.785130|0.800888|
        |M|0.666667|0.001150|0.002296|
        |E|0.811915|0.779964|0.795619|
        |S|0.651192|0.882552|0.889028|

	- 词性标注

        |符号|准确率|召回率|F1|
        |---|------|----|--|
        |n  |0.826394|0.961933|0.889028|
        |nt |0.973244|0.556405|0.708029|
        |nd |0.967742|0.626305|0.760456|
        |nl |0.827586|0.466019|0.596273|
        |nh |0.982759|0.441860|0.609626|
        |nhf|0.769231|0.263158|0.392157|
        |nhs|1.000000|0.363636|0.533333|
        |ns |0.984962|0.791541|0.877722|
        |nn |1.000000|1.000000|1.000000|
        |ni |0.642857|0.230769|0.339623|
        |nz |1.000000|0.333333|0.500000|
        |v  |0.796510|0.935295|0.860342|
        |vd |1.000000|0.032895|0.063694|
        |vl |0.994382|0.774617|0.870849|
        |vu |0.968750|0.333333|0.496000|
        |a  |0.909028|0.747309|0.820274|
        |f  |1.000000|0.062500|0.117647|
        |m  |0.868671|0.884058|0.876297|
        |q  |0.976852|0.561170|0.712838|
        |d  |0.890695|0.891695|0.891195|
        |r  |0.977379|0.960153|0.968690|
        |p  |0.957411|0.754869|0.918210|
        |c  |0.970636|0.871157|0.988631|
        |u  |0.987583|0.989681|0.988631|
        |e  |1.000000|1.000000|1.000000|
        |o  |0.888889|1.000000|0.941176|
        |i  |0.980519|0.604000|0.747525|
        |j  |0.964286|0.406015|0.571429|
        |h  |1.000000|0.047619|0.090909|
        |k  |1.000000|0.306931|0.469697|
        |g  |1.000000|1.000000|1.000000|
        |x  |1.000000|0.200000|0.333333|
        |w  |0.908711|0.999344|0.951875|
        |ws |1.000000|0.888889|0.941176|
        |wu |1.000000|1.000000|1.000000|
